- defaults:
    link:
        create: true
        force: true

- clean: ['~']

- link:
    ~/:
        glob: true
        path: zsh/*
        prefix: '.'
    ~/.oh-my-zsh/:
        glob: true
        path: ohmyzsh/*
    ~/.gitconfig:
        path: git/gitconfig
    ~/.gnupg/:
        glob: true
        path: gnupg/*

- shell:
    -
        command: git submodule update --init --recursive
        description: Installing submodules
        stderr: true
    -
        command: if type brew > /dev/null 2>&1; then echo "Found existing installation, skipping"; else /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"; fi
        description: Installing Homebrew
        stderr: true
        stdout: true
        stdin: true
    -
        command: brew bundle --no-lock --file=homebrew/Brewfile
        description: Installing applications
        stderr: true